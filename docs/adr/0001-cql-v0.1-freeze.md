# ADR 0001: CQL v0.1 Grammar Freeze

Date: 2025-10-04
Status: Accepted (v0.1)

## Context
We need a minimal, stable CQL surface to enable Phase 1 implementation, tests, and documentation without grammar churn.

## Decision
Freeze the following tokens and behaviors for v0.1:

- MATCH label="<string>" [PREDICATE <ident>]
- ASOF <iso8601>
- BELIEF >= <float>
- RETURN [EXPLAIN] [PROVENANCE]

Behavioral guarantees:
- As-of filtering via temporal mask on `aspects.valid_from/valid_to` using COALESCE bounds.
- Confidence surfaces from Belief v0 logistic.
- Every result includes at least one provenance item or the query returns empty.
- EXPLAIN includes operator timings and row counts per step.

## Non-goals (v0.1)
- Multi-hop path patterns, complex WHERE, JOINs.
- Planner cost model beyond basic ANN→mask→traverse pipeline.
- Pagination/ordering beyond default belief ordering.
- Aggregations and user-defined functions.

## Rationale
A very small and stable surface lets us implement end-to-end behavior (provenance, belief, explain) and ship golden tests quickly.

## Consequences
- Parser/Executor tests must guard this behavior.
- Any change must bump to v0.2 ADR with migration plan.

## References
- `cns_py/cql/parser.py`
- `cns_py/cql/executor.py`
- `tests/test_parser.py`
- `tests/test_cql_executor.py`
